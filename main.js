/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DragAndDropBlocksPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/DragVisuals/DragVisuals.ts
var import_obsidian = require("obsidian");

// src/DragVisuals/DragPlaceholder.ts
var DragPlaceholder = class {
  constructor() {
    this.currentPosition = null;
    this.targetLine = null;
    this.sourceLineNumber = null;
    this.element = this.createDragPlaceholderElement();
    document.body.appendChild(this.element);
  }
  createDragPlaceholderElement() {
    const dragPlaceholder = document.createElement("div");
    dragPlaceholder.className = "drag-placeholder";
    dragPlaceholder.style.position = "absolute";
    dragPlaceholder.style.height = "2px";
    dragPlaceholder.style.backgroundColor = "var(--interactive-accent)";
    dragPlaceholder.style.display = "none";
    dragPlaceholder.style.zIndex = "1000";
    return dragPlaceholder;
  }
  getFrontmatterLineCount(doc) {
    let lineCount = 0;
    const firstLine = doc.line(1);
    if (firstLine.text.trim() !== "---") {
      return 0;
    }
    for (let i = 2; i <= doc.lines; i++) {
      lineCount++;
      const line = doc.line(i);
      if (line.text.trim() === "---") {
        return lineCount + 1;
      }
    }
    return 0;
  }
  showDragPlaceholder(view, pos, sourceLineNumber) {
    const doc = view.state.doc;
    const frontmatterLineCount = this.getFrontmatterLineCount(doc);
    const firstContentLineNumber = frontmatterLineCount + 1;
    const line = doc.lineAt(pos);
    let placeholderPos;
    let targetLineNumber;
    if (line.number < firstContentLineNumber) {
      placeholderPos = doc.line(firstContentLineNumber).from;
      targetLineNumber = firstContentLineNumber;
    } else if (pos >= doc.length) {
      placeholderPos = doc.length;
      targetLineNumber = doc.lines + 1;
    } else if (pos <= line.from + (line.to - line.from) / 2) {
      placeholderPos = line.from;
      targetLineNumber = line.number;
    } else {
      placeholderPos = line.to + 1;
      targetLineNumber = line.number + 1;
    }
    const rect = view.coordsAtPos(placeholderPos);
    if (!rect)
      return;
    const lineElement = view.dom.querySelector(".cm-line");
    if (!lineElement)
      return;
    const lineRect = lineElement.getBoundingClientRect();
    this.element.style.display = "block";
    this.element.style.left = `${lineRect.left}px`;
    this.element.style.width = `${lineRect.width}px`;
    this.element.style.height = "2px";
    if (targetLineNumber === firstContentLineNumber) {
      const firstContentLineRect = view.coordsAtPos(placeholderPos);
      if (firstContentLineRect) {
        this.element.style.top = `${firstContentLineRect.top - 5}px`;
      }
    } else if (targetLineNumber > doc.lines) {
      this.element.style.top = `${rect.bottom + 2}px`;
    } else {
      const currentLineRect = view.coordsAtPos(line.from);
      const nextLineRect = view.coordsAtPos(doc.line(targetLineNumber).from);
      if (currentLineRect && nextLineRect) {
        this.element.style.top = `${(currentLineRect.bottom + nextLineRect.top) / 2}px`;
      }
    }
    this.currentPosition = placeholderPos;
    this.targetLine = targetLineNumber;
    this.sourceLineNumber = sourceLineNumber;
  }
  hideDragPlaceholder() {
    this.element.style.display = "none";
    this.currentPosition = null;
    this.targetLine = null;
    this.sourceLineNumber = null;
  }
  getPlaceholderPosition() {
    return this.currentPosition;
  }
  getTargetLine() {
    return this.targetLine;
  }
  getSourceLineNumber() {
    return this.sourceLineNumber;
  }
};

// src/DragVisuals/DragHandleManager.ts
var import_view = require("@codemirror/view");
var import_state = require("@codemirror/state");
var DragHandleWidget = class extends import_view.WidgetType {
  toDOM() {
    const span = document.createElement("span");
    span.className = "cm-drag-handler-container";
    span.setAttribute("draggable", "true");
    span.setAttribute("contenteditable", "false");
    span.innerHTML = `
            <span class="clickable-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-grip-vertical">
                    <circle cx="9" cy="12" r="1"></circle>
                    <circle cx="9" cy="5" r="1"></circle>
                    <circle cx="9" cy="19" r="1"></circle>
                    <circle cx="15" cy="12" r="1"></circle>
                    <circle cx="15" cy="5" r="1"></circle>
                    <circle cx="15" cy="19" r="1"></circle>
                </svg>
            </span>
        `;
    return span;
  }
};
var addDragHandle = import_state.StateEffect.define();
var setDraggingLine = import_state.StateEffect.define();
var dragHandleField = import_state.StateField.define({
  create() {
    return import_view.Decoration.none;
  },
  update(handles, tr) {
    handles = handles.map(tr.changes);
    for (let e of tr.effects) {
      if (e.is(addDragHandle)) {
        handles = handles.update({
          add: [import_view.Decoration.widget({
            widget: new DragHandleWidget(),
            side: -1
          }).range(e.value.from)]
        });
      }
    }
    return handles;
  },
  provide: (f) => import_view.EditorView.decorations.from(f)
});
var draggingLineField = import_state.StateField.define({
  create() {
    return null;
  },
  update(value, tr) {
    for (let e of tr.effects) {
      if (e.is(setDraggingLine)) {
        return e.value;
      }
    }
    return value;
  },
  provide: (f) => import_view.EditorView.decorations.from(f, (value) => {
    return (view) => {
      if (value === null)
        return import_view.Decoration.none;
      let line = view.state.doc.line(value);
      return import_view.Decoration.set(import_view.Decoration.line({ class: "cm-dragging-line" }).range(line.from));
    };
  })
});
var dragHandlePlugin = import_view.ViewPlugin.fromClass(class {
  constructor(view) {
    this.decorations = this.createDecorations(view);
  }
  update(update) {
    if (update.docChanged || update.viewportChanged) {
      this.decorations = this.createDecorations(update.view);
    }
  }
  createDecorations(view) {
    let widgets = [];
    for (let { from, to } of view.visibleRanges) {
      for (let pos = from; pos <= to; ) {
        let line = view.state.doc.lineAt(pos);
        widgets.push(import_view.Decoration.widget({
          widget: new DragHandleWidget(),
          side: -1
        }).range(line.from));
        pos = line.to + 1;
      }
    }
    return import_view.Decoration.set(widgets);
  }
}, {
  decorations: (v) => v.decorations
});

// src/DragVisuals/DragVisuals.ts
var DragVisuals = class {
  constructor(app) {
    this.app = app;
    this.dragPlaceholder = new DragPlaceholder();
  }
  showDragPlaceholder(view, pos, sourceLineNumber) {
    this.dragPlaceholder.showDragPlaceholder(view, pos, sourceLineNumber);
  }
  hideDragPlaceholder() {
    this.dragPlaceholder.hideDragPlaceholder();
  }
  createDragPreview(text, event) {
    var _a;
    const dragImage = document.createElement("div");
    dragImage.textContent = text.slice(0, 20) + "...";
    dragImage.className = "drag-preview";
    document.body.appendChild(dragImage);
    (_a = event.dataTransfer) == null ? void 0 : _a.setDragImage(dragImage, 0, 0);
    setTimeout(() => document.body.removeChild(dragImage), 0);
  }
  getEditorView() {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!view)
      return null;
    return view.editor.cm;
  }
  setDraggingLine(view, lineNumber) {
    view.dispatch({
      effects: setDraggingLine.of(lineNumber)
    });
  }
  static getDragExtensions() {
    return [
      dragHandleField,
      draggingLineField,
      dragHandlePlugin
    ];
  }
  getPlaceholderPosition() {
    return this.dragPlaceholder.getPlaceholderPosition();
  }
  getTargetLine() {
    return this.dragPlaceholder.getTargetLine();
  }
  getSourceLineNumber() {
    return this.dragPlaceholder.getSourceLineNumber();
  }
};

// src/BlockMover.ts
var import_state2 = require("@codemirror/state");
var BlockMover = class {
  static moveBlock(view, fromLine, toLine) {
    console.log("BlockMover.moveBlock \u5F00\u59CB:", {
      \u4ECE\u884C: fromLine,
      \u5230\u884C: toLine
    });
    const doc = view.state.doc;
    const totalLines = doc.lines;
    console.log("\u6587\u6863\u4FE1\u606F:", { \u603B\u884C\u6570: totalLines });
    fromLine = Math.max(1, Math.min(fromLine, totalLines));
    toLine = Math.max(1, Math.min(toLine, totalLines + 1));
    console.log("\u8C03\u6574\u540E\u7684\u884C\u53F7:", { \u4ECE\u884C: fromLine, \u5230\u884C: toLine });
    if (toLine === fromLine + 1 || fromLine === toLine) {
      console.log("\u6E90\u884C\u548C\u76EE\u6807\u884C\u76F8\u540C\u6216\u76F8\u90BB\uFF0C\u65E0\u9700\u79FB\u52A8");
      return;
    }
    const fromLineContent = doc.line(fromLine);
    const lineContent = fromLineContent.text;
    console.log("\u8981\u79FB\u52A8\u7684\u5185\u5BB9:", { \u884C\u5185\u5BB9: lineContent });
    let changes = [];
    let insertPos;
    let newCursorPos;
    if (toLine > fromLine) {
      console.log("\u5411\u4E0B\u79FB\u52A8");
      if (toLine > totalLines) {
        const lastLine = doc.line(totalLines);
        insertPos = lastLine.to;
        changes = [
          { from: insertPos, insert: "\n" + lineContent },
          { from: fromLineContent.from, to: fromLineContent.to + (fromLine === totalLines ? 0 : 1), insert: "" }
        ];
        newCursorPos = insertPos + lineContent.length + 1;
      } else {
        const targetLine = doc.line(toLine - 1);
        insertPos = targetLine.to;
        changes = [
          { from: insertPos, insert: "\n" + lineContent },
          { from: fromLineContent.from, to: fromLineContent.to + 1, insert: "" }
        ];
        newCursorPos = insertPos + lineContent.length + 1;
      }
    } else {
      console.log("\u5411\u4E0A\u79FB\u52A8");
      const targetLine = doc.line(toLine - 1);
      const lastLine = doc.line(doc.lines);
      insertPos = targetLine.to;
      if (fromLine === totalLines) {
        console.log("\u6700\u540E\u4E00\u884C\u5411\u4E0A\u79FB\u52A8");
        const secondLastLine = doc.line(totalLines - 1);
        changes = [
          { from: insertPos, insert: "\n" + lineContent },
          { from: secondLastLine.to, to: doc.length }
        ];
      } else {
        changes = [
          { from: insertPos, insert: "\n" + lineContent },
          { from: fromLineContent.from, to: fromLineContent.to + 1, insert: "" }
        ];
      }
      newCursorPos = insertPos + lineContent.length + 1;
    }
    console.log("\u51C6\u5907\u6267\u884C\u7684\u66F4\u6539:", changes);
    try {
      view.dispatch({
        changes,
        selection: import_state2.EditorSelection.cursor(Math.min(newCursorPos, doc.length))
      });
      console.log("\u6267\u884C\u66F4\u6539:", {
        deleteFrom: fromLine,
        insertAt: toLine,
        insertContent: lineContent,
        newCursorPos
      });
      const newDoc = view.state.doc;
      console.log("\u79FB\u52A8\u540E\u7684\u6587\u6863\u603B\u884C\u6570:", newDoc.lines);
      if (toLine <= newDoc.lines) {
        const newTargetLine = newDoc.line(Math.min(toLine, newDoc.lines));
        console.log("\u65B0\u4F4D\u7F6E\u7684\u5185\u5BB9:", { \u884C\u53F7: Math.min(toLine, newDoc.lines), \u5185\u5BB9: newTargetLine.text });
      } else {
        console.log("\u65B0\u4F4D\u7F6E\u5728\u6587\u6863\u672B\u5C3E");
      }
      if (fromLine <= newDoc.lines) {
        const originalLine = newDoc.line(Math.min(fromLine, newDoc.lines));
        console.log("\u539F\u4F4D\u7F6E\u7684\u5F53\u524D\u5185\u5BB9:", { \u884C\u53F7: Math.min(fromLine, newDoc.lines), \u5185\u5BB9: originalLine.text });
      } else {
        console.log("\u539F\u4F4D\u7F6E\u5DF2\u8D85\u51FA\u6587\u6863\u8303\u56F4");
      }
    } catch (error) {
      console.error("\u79FB\u52A8\u5757\u65F6\u51FA\u9519:", error);
    }
  }
};

// src/utils.ts
var import_obsidian2 = require("obsidian");
function getEditorView(app) {
  const view = app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
  if (!view)
    return null;
  return view.editor.cm;
}

// main.ts
var DragAndDropBlocksPlugin = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    this.draggingStartPos = null;
    this.sourceLineNumber = null;
  }
  async onload() {
    this.dragVisuals = new DragVisuals(this.app);
    this.registerEditorExtension([
      dragHandleField,
      draggingLineField,
      dragHandlePlugin,
      ...DragVisuals.getDragExtensions()
    ]);
    this.addDragAndDropListeners();
  }
  onunload() {
  }
  addDragAndDropListeners() {
    this.registerDomEvent(document, "dragstart", this.onDragStart.bind(this));
    this.registerDomEvent(document, "dragover", this.onDragOver.bind(this));
    this.registerDomEvent(document, "drop", this.onDrop.bind(this));
    this.registerDomEvent(document, "dragend", this.onDragEnd.bind(this));
  }
  onDragStart(event) {
    console.clear();
    const target = event.target;
    if (!target.classList.contains("cm-drag-handler-container"))
      return;
    const view = getEditorView(this.app);
    if (!view)
      return;
    const pos = view.posAtDOM(target);
    if (pos === null)
      return;
    const line = view.state.doc.lineAt(pos);
    this.draggingStartPos = line.from;
    this.sourceLineNumber = line.number;
    event.dataTransfer.effectAllowed = "move";
    this.dragVisuals.createDragPreview(line.text, event);
    this.dragVisuals.setDraggingLine(view, line.number);
  }
  onDragOver(event) {
    event.preventDefault();
    const view = getEditorView(this.app);
    if (!view || this.sourceLineNumber === null)
      return;
    const pos = view.posAtCoords({ x: event.clientX, y: event.clientY });
    if (pos === null)
      return;
    this.dragVisuals.showDragPlaceholder(view, pos, this.sourceLineNumber);
  }
  onDrop(event) {
    event.preventDefault();
    console.log("6.1 \u62D6\u653E\u4E8B\u4EF6\u89E6\u53D1");
    const view = getEditorView(this.app);
    if (!view) {
      console.error("6.2 \u672A\u627E\u5230\u7F16\u8F91\u5668\u89C6\u56FE");
      return;
    }
    const targetLine = this.dragVisuals.getTargetLine();
    const sourceLineNumber = this.dragVisuals.getSourceLineNumber();
    console.log("6.3 \u62D6\u653E\u4FE1\u606F:", {
      \u6E90\u884C\u53F7: sourceLineNumber,
      \u76EE\u6807\u884C\u53F7: targetLine
    });
    if (targetLine === null || sourceLineNumber === null) {
      console.error("6.4 \u65E0\u6CD5\u786E\u5B9A\u76EE\u6807\u884C\u6216\u6E90\u884C");
      return;
    }
    if (sourceLineNumber !== targetLine && targetLine !== sourceLineNumber + 1) {
      console.log("6.6 \u6B63\u5728\u79FB\u52A8\u5757");
      BlockMover.moveBlock(view, sourceLineNumber, targetLine);
    } else {
      console.log("6.7 \u6E90\u884C\u548C\u76EE\u6807\u884C\u76F8\u540C\u6216\u76F8\u90BB\uFF0C\u65E0\u9700\u79FB\u52A8");
    }
    this.dragVisuals.hideDragPlaceholder();
    this.dragVisuals.setDraggingLine(view, null);
    console.log("6.8 \u62D6\u653E\u5B8C\u6210");
  }
  getFrontmatterEndPosition(doc) {
    const firstLine = doc.line(1);
    if (firstLine.text.trim() !== "---") {
      return 0;
    }
    for (let i = 2; i <= doc.lines; i++) {
      const line = doc.line(i);
      if (line.text.trim() === "---") {
        return line.to;
      }
    }
    return 0;
  }
  shouldInsertBefore(view, pos) {
    const line = view.state.doc.lineAt(pos);
    const lineStart = line.from;
    const lineMiddle = lineStart + Math.floor(line.length / 2);
    return pos < lineMiddle;
  }
  onDragEnd(event) {
    const view = getEditorView(this.app);
    if (!view)
      return;
    this.dragVisuals.hideDragPlaceholder();
    this.dragVisuals.setDraggingLine(view, null);
    this.draggingStartPos = null;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvRHJhZ1Zpc3VhbHMvRHJhZ1Zpc3VhbHMudHMiLCAic3JjL0RyYWdWaXN1YWxzL0RyYWdQbGFjZWhvbGRlci50cyIsICJzcmMvRHJhZ1Zpc3VhbHMvRHJhZ0hhbmRsZU1hbmFnZXIudHMiLCAic3JjL0Jsb2NrTW92ZXIudHMiLCAic3JjL3V0aWxzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFZGl0b3JWaWV3IH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBEcmFnVmlzdWFscyB9IGZyb20gJy4vc3JjL0RyYWdWaXN1YWxzL0RyYWdWaXN1YWxzJztcbmltcG9ydCB7IGRyYWdIYW5kbGVGaWVsZCwgZHJhZ2dpbmdMaW5lRmllbGQsIGRyYWdIYW5kbGVQbHVnaW4gfSBmcm9tICcuL3NyYy9EcmFnVmlzdWFscy9EcmFnSGFuZGxlTWFuYWdlcic7XG5pbXBvcnQgeyBCbG9ja01vdmVyIH0gZnJvbSAnLi9zcmMvQmxvY2tNb3Zlcic7XG5pbXBvcnQgeyBnZXRFZGl0b3JWaWV3IH0gZnJvbSAnLi9zcmMvdXRpbHMnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERyYWdBbmREcm9wQmxvY2tzUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBwcml2YXRlIGRyYWdWaXN1YWxzOiBEcmFnVmlzdWFscztcbiAgICBwcml2YXRlIGRyYWdnaW5nU3RhcnRQb3M6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgc291cmNlTGluZU51bWJlcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cblxuICAgIC8vIDEuIFx1NjNEMlx1NEVGNlx1NTJBMFx1OEY3RFxuICAgIGFzeW5jIG9ubG9hZCgpIHtcblxuICAgICAgICB0aGlzLmRyYWdWaXN1YWxzID0gbmV3IERyYWdWaXN1YWxzKHRoaXMuYXBwKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyRWRpdG9yRXh0ZW5zaW9uKFtcbiAgICAgICAgICAgIGRyYWdIYW5kbGVGaWVsZCxcbiAgICAgICAgICAgIGRyYWdnaW5nTGluZUZpZWxkLFxuICAgICAgICAgICAgZHJhZ0hhbmRsZVBsdWdpbixcbiAgICAgICAgICAgIC4uLkRyYWdWaXN1YWxzLmdldERyYWdFeHRlbnNpb25zKClcbiAgICAgICAgXSk7XG5cbiAgICAgICAgLy8gMS4xIFx1NkRGQlx1NTJBMFx1NjJENlx1NTJBOFx1NTQ4Q1x1NjUzRVx1N0Y2RVx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OFxuICAgICAgICB0aGlzLmFkZERyYWdBbmREcm9wTGlzdGVuZXJzKCk7XG5cblxuICAgIH1cblxuICAgIC8vIDIuIFx1NjNEMlx1NEVGNlx1NTM3OFx1OEY3RFxuICAgIG9udW5sb2FkKCkge1xuICAgIH1cblxuICAgIC8vIDMuIFx1NkRGQlx1NTJBMFx1NjJENlx1NjUzRVx1NzZEMVx1NTQyQ1x1NTY2OFxuICAgIHByaXZhdGUgYWRkRHJhZ0FuZERyb3BMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2RyYWdzdGFydCcsIHRoaXMub25EcmFnU3RhcnQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2RyYWdvdmVyJywgdGhpcy5vbkRyYWdPdmVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdkcm9wJywgdGhpcy5vbkRyb3AuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2RyYWdlbmQnLCB0aGlzLm9uRHJhZ0VuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cblxuICAgIC8vIDQuIFx1NjJENlx1NTJBOFx1NUYwMFx1NTlDQlx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNiBcbiAgICBwcml2YXRlIG9uRHJhZ1N0YXJ0KGV2ZW50OiBEcmFnRXZlbnQpIHtcblxuICAgICAgICBjb25zb2xlLmNsZWFyKCk7XG4gICAgICAgIC8vIDQuMSBcdTgzQjdcdTUzRDZcdTYyRDZcdTUyQThcdTc2RUVcdTY4MDdcdTUxNDNcdTdEMjBcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAvLyA0LjIgXHU1OTgyXHU2NzlDXHU3NkVFXHU2ODA3XHU0RTBEXHU2NjJGXHU2MkQ2XHU1MkE4XHU2MjRCXHU2N0M0XHU1QkI5XHU1NjY4XHVGRjBDXHU1MjE5XHU5MDAwXHU1MUZBXG4gICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY20tZHJhZy1oYW5kbGVyLWNvbnRhaW5lcicpKSByZXR1cm47XG5cbiAgICAgICAgLy8gNC4zIFx1ODNCN1x1NTNENlx1N0YxNlx1OEY5MVx1NTY2OFx1ODlDNlx1NTZGRVxuICAgICAgICBjb25zdCB2aWV3ID0gZ2V0RWRpdG9yVmlldyh0aGlzLmFwcCk7XG4gICAgICAgIC8vIDQuNCBcdTU5ODJcdTY3OUNcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTg5QzZcdTU2RkVcdUZGMENcdTUyMTlcdTkwMDBcdTUxRkFcbiAgICAgICAgaWYgKCF2aWV3KSByZXR1cm47XG5cbiAgICAgICAgLy8gNC41IFx1ODNCN1x1NTNENlx1NzZFRVx1NjgwN1x1NTE0M1x1N0QyMFx1NTcyOFx1NjU4N1x1Njg2M1x1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RVxuICAgICAgICBjb25zdCBwb3MgPSB2aWV3LnBvc0F0RE9NKHRhcmdldCk7XG4gICAgICAgIC8vIDQuNiBcdTU5ODJcdTY3OUNcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTRGNERcdTdGNkVcdUZGMENcdTUyMTlcdTkwMDBcdTUxRkFcbiAgICAgICAgaWYgKHBvcyA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIDQuNyBcdTgzQjdcdTUzRDZcdTYyRDZcdTUyQThcdTVGMDBcdTU5Q0JcdTc2ODRcdTg4NENcbiAgICAgICAgY29uc3QgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAvLyA0LjggXHU4QkIwXHU1RjU1XHU2MkQ2XHU1MkE4XHU1RjAwXHU1OUNCXHU3Njg0XHU0RjREXHU3RjZFXG4gICAgICAgIHRoaXMuZHJhZ2dpbmdTdGFydFBvcyA9IGxpbmUuZnJvbTtcbiAgICAgICAgdGhpcy5zb3VyY2VMaW5lTnVtYmVyID0gbGluZS5udW1iZXI7XG5cbiAgICAgICAgLy8gNC45IFx1OEJCRVx1N0Y2RVx1NjJENlx1NTJBOFx1NjU0OFx1Njc5Q1x1NEUzQVx1NzlGQlx1NTJBOFxuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIhLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2MkQ2XHU1MkE4XHU5ODg0XHU4OUM4XG4gICAgICAgIHRoaXMuZHJhZ1Zpc3VhbHMuY3JlYXRlRHJhZ1ByZXZpZXcobGluZS50ZXh0LCBldmVudCk7XG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NkI2M1x1NTcyOFx1NjJENlx1NTJBOFx1NzY4NFx1ODg0Q1xuICAgICAgICB0aGlzLmRyYWdWaXN1YWxzLnNldERyYWdnaW5nTGluZSh2aWV3LCBsaW5lLm51bWJlcik7XG4gICAgfVxuXG5cbiAgICAvLyA1LiBcdTYyRDZcdTUyQThcdThGQzdcdTdBMEJcdTRFMkRcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcdUZGMENcdTYyRDZcdTUyQThcdThGQzdcdTdBMEJcdTRFMkRcdTc2ODRcdTg5QzZcdTg5QzlcdTUzQ0RcdTk5ODhcbiAgICBwcml2YXRlIG9uRHJhZ092ZXIoZXZlbnQ6IERyYWdFdmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB2aWV3ID0gZ2V0RWRpdG9yVmlldyh0aGlzLmFwcCk7XG4gICAgICAgIGlmICghdmlldyB8fCB0aGlzLnNvdXJjZUxpbmVOdW1iZXIgPT09IG51bGwpIHJldHVybjtcblxuICAgICAgICBjb25zdCBwb3MgPSB2aWV3LnBvc0F0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9KTtcbiAgICAgICAgaWYgKHBvcyA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuZHJhZ1Zpc3VhbHMuc2hvd0RyYWdQbGFjZWhvbGRlcih2aWV3LCBwb3MsIHRoaXMuc291cmNlTGluZU51bWJlcik7XG4gICAgfVxuXG4gICAgLy8gNi4gXHU2MkQ2XHU1MkE4XHU3RUQzXHU2NzVGXHU0RThCXHU0RUY2XHU1OTA0XHU3NDA2XHVGRjBDXHU1QjgzXHU1MUIzXHU1QjlBXHU0RTg2XHU2MkQ2XHU1MkE4XHU3RUQzXHU2NzVGXHU1NDBFXHU1NzU3XHU3Njg0XHU2NzAwXHU3RUM4XHU0RjREXHU3RjZFXG4gICAgcHJpdmF0ZSBvbkRyb3AoZXZlbnQ6IERyYWdFdmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zb2xlLmxvZygnNi4xIFx1NjJENlx1NjUzRVx1NEU4Qlx1NEVGNlx1ODlFNlx1NTNEMScpO1xuICAgIFxuICAgICAgICBjb25zdCB2aWV3ID0gZ2V0RWRpdG9yVmlldyh0aGlzLmFwcCk7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignNi4yIFx1NjcyQVx1NjI3RVx1NTIzMFx1N0YxNlx1OEY5MVx1NTY2OFx1ODlDNlx1NTZGRScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHRhcmdldExpbmUgPSB0aGlzLmRyYWdWaXN1YWxzLmdldFRhcmdldExpbmUoKTtcbiAgICAgICAgY29uc3Qgc291cmNlTGluZU51bWJlciA9IHRoaXMuZHJhZ1Zpc3VhbHMuZ2V0U291cmNlTGluZU51bWJlcigpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJzYuMyBcdTYyRDZcdTY1M0VcdTRGRTFcdTYwNkY6Jywge1xuICAgICAgICAgICAgXHU2RTkwXHU4ODRDXHU1M0Y3OiBzb3VyY2VMaW5lTnVtYmVyLFxuICAgICAgICAgICAgXHU3NkVFXHU2ODA3XHU4ODRDXHU1M0Y3OiB0YXJnZXRMaW5lXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRhcmdldExpbmUgPT09IG51bGwgfHwgc291cmNlTGluZU51bWJlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignNi40IFx1NjVFMFx1NkNENVx1Nzg2RVx1NUI5QVx1NzZFRVx1NjgwN1x1ODg0Q1x1NjIxNlx1NkU5MFx1ODg0QycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIDYuNSBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTk3MDBcdTg5ODFcdTc5RkJcdTUyQThcbiAgICAgICAgaWYgKHNvdXJjZUxpbmVOdW1iZXIgIT09IHRhcmdldExpbmUgJiYgdGFyZ2V0TGluZSAhPT0gc291cmNlTGluZU51bWJlciArIDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc2LjYgXHU2QjYzXHU1NzI4XHU3OUZCXHU1MkE4XHU1NzU3Jyk7XG4gICAgICAgICAgICBCbG9ja01vdmVyLm1vdmVCbG9jayh2aWV3LCBzb3VyY2VMaW5lTnVtYmVyLCB0YXJnZXRMaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc2LjcgXHU2RTkwXHU4ODRDXHU1NDhDXHU3NkVFXHU2ODA3XHU4ODRDXHU3NkY4XHU1NDBDXHU2MjE2XHU3NkY4XHU5MEJCXHVGRjBDXHU2NUUwXHU5NzAwXHU3OUZCXHU1MkE4Jyk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdGhpcy5kcmFnVmlzdWFscy5oaWRlRHJhZ1BsYWNlaG9sZGVyKCk7XG4gICAgICAgIHRoaXMuZHJhZ1Zpc3VhbHMuc2V0RHJhZ2dpbmdMaW5lKHZpZXcsIG51bGwpO1xuICAgICAgICBjb25zb2xlLmxvZygnNi44IFx1NjJENlx1NjUzRVx1NUI4Q1x1NjIxMCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyA3LiBcdTgzQjdcdTUzRDZcdTY1ODdcdTY4NjNcdTVDNUVcdTYwMjdcdTRGRTFcdTYwNkZcdTdFRDNcdTY3NUZcdTRGNERcdTdGNkVcbiAgICBwcml2YXRlIGdldEZyb250bWF0dGVyRW5kUG9zaXRpb24oZG9jOiBhbnkpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBmaXJzdExpbmUgPSBkb2MubGluZSgxKTtcbiAgICAgICAgaWYgKGZpcnN0TGluZS50ZXh0LnRyaW0oKSAhPT0gJy0tLScpIHtcbiAgICAgICAgICAgIHJldHVybiAwOyAvLyBcdTZDQTFcdTY3MDlcdTY1ODdcdTY4NjNcdTVDNUVcdTYwMjdcdTRGRTFcdTYwNkZcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMjsgaSA8PSBkb2MubGluZXM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IGRvYy5saW5lKGkpO1xuICAgICAgICAgICAgaWYgKGxpbmUudGV4dC50cmltKCkgPT09ICctLS0nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmUudG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7IC8vIFx1NjcyQVx1NjI3RVx1NTIzMFx1N0VEM1x1Njc1Rlx1NzY4NFx1NjU4N1x1Njg2M1x1NUM1RVx1NjAyN1x1NEZFMVx1NjA2Rlx1NTIwNlx1OTY5NFx1N0IyNlxuICAgIH1cblxuICAgIC8vIDguIFx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1NUU5NFx1OEJFNVx1NTcyOFx1NUY1M1x1NTI0RFx1NEY0RFx1N0Y2RVx1NEU0Qlx1NTI0RFx1NjNEMlx1NTE2NVxuICAgIHByaXZhdGUgc2hvdWxkSW5zZXJ0QmVmb3JlKHZpZXc6IEVkaXRvclZpZXcsIHBvczogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgY29uc3QgbGluZVN0YXJ0ID0gbGluZS5mcm9tO1xuICAgICAgICBjb25zdCBsaW5lTWlkZGxlID0gbGluZVN0YXJ0ICsgTWF0aC5mbG9vcihsaW5lLmxlbmd0aCAvIDIpO1xuICAgICAgICByZXR1cm4gcG9zIDwgbGluZU1pZGRsZTtcbiAgICB9XG5cbiAgICAvLyA5LiBcdTYyRDZcdTUyQThcdTdFRDNcdTY3NUZcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcbiAgICBwcml2YXRlIG9uRHJhZ0VuZChldmVudDogRHJhZ0V2ZW50KSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBnZXRFZGl0b3JWaWV3KHRoaXMuYXBwKTtcbiAgICAgICAgaWYgKCF2aWV3KSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5kcmFnVmlzdWFscy5oaWRlRHJhZ1BsYWNlaG9sZGVyKCk7XG4gICAgICAgIHRoaXMuZHJhZ1Zpc3VhbHMuc2V0RHJhZ2dpbmdMaW5lKHZpZXcsIG51bGwpO1xuXG4gICAgICAgIHRoaXMuZHJhZ2dpbmdTdGFydFBvcyA9IG51bGw7XG4gICAgfVxufSIsICJpbXBvcnQgeyBFZGl0b3JWaWV3LCBXaWRnZXRUeXBlLCBWaWV3VXBkYXRlLCBWaWV3UGx1Z2luLCBEZWNvcmF0aW9uU2V0LCBEZWNvcmF0aW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBTdGF0ZUZpZWxkLCBTdGF0ZUVmZmVjdCwgRWRpdG9yU3RhdGUgfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5pbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRHJhZ1BsYWNlaG9sZGVyIH0gZnJvbSAnLi9EcmFnUGxhY2Vob2xkZXInO1xuaW1wb3J0IHsgZHJhZ0hhbmRsZUZpZWxkLCBkcmFnZ2luZ0xpbmVGaWVsZCwgZHJhZ0hhbmRsZVBsdWdpbiwgc2V0RHJhZ2dpbmdMaW5lIH0gZnJvbSAnLi9EcmFnSGFuZGxlTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBEcmFnVmlzdWFscyB7XG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcbiAgICBwcml2YXRlIGRyYWdQbGFjZWhvbGRlcjogRHJhZ1BsYWNlaG9sZGVyO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuZHJhZ1BsYWNlaG9sZGVyID0gbmV3IERyYWdQbGFjZWhvbGRlcigpO1xuICAgIH1cblxuICAgIC8vIDEuIFx1NjYzRVx1NzkzQVx1NjJENlx1NTJBOFx1NTM2MFx1NEY0RFx1N0IyNlxuICAgIHNob3dEcmFnUGxhY2Vob2xkZXIodmlldzogRWRpdG9yVmlldywgcG9zOiBudW1iZXIsIHNvdXJjZUxpbmVOdW1iZXI6IG51bWJlcikge1xuICAgICAgICB0aGlzLmRyYWdQbGFjZWhvbGRlci5zaG93RHJhZ1BsYWNlaG9sZGVyKHZpZXcsIHBvcywgc291cmNlTGluZU51bWJlcik7XG4gICAgfVxuXG4gICAgLy8gMi4gXHU5NjkwXHU4NUNGXHU2MkQ2XHU1MkE4XHU1MzYwXHU0RjREXHU3QjI2XG4gICAgaGlkZURyYWdQbGFjZWhvbGRlcigpIHtcbiAgICAgICAgdGhpcy5kcmFnUGxhY2Vob2xkZXIuaGlkZURyYWdQbGFjZWhvbGRlcigpO1xuICAgIH1cblxuXG4gICAgLy8gMS4gXHU2NUIwXHU1ODlFXHU2NUI5XHU2Q0Q1XHVGRjFBXHU1MjFCXHU1RUZBXHU2MkQ2XHU1MkE4XHU5ODg0XHU4OUM4XG4gICAgY3JlYXRlRHJhZ1ByZXZpZXcodGV4dDogc3RyaW5nLCBldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGRyYWdJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkcmFnSW1hZ2UudGV4dENvbnRlbnQgPSB0ZXh0LnNsaWNlKDAsIDIwKSArICcuLi4nO1xuICAgICAgICBkcmFnSW1hZ2UuY2xhc3NOYW1lID0gJ2RyYWctcHJldmlldyc7XG4gICAgICAgIFxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRyYWdJbWFnZSk7XG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlcj8uc2V0RHJhZ0ltYWdlKGRyYWdJbWFnZSwgMCwgMCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTRGN0ZcdTc1Mjggc2V0VGltZW91dCBcdTY3NjVcdTc4NkVcdTRGRERcdTYyRDZcdTUyQThcdTVGMDBcdTU5Q0JcdTU0MEVcdTUxOERcdTc5RkJcdTk2NjRcdTk4ODRcdTg5QzhcdTUxNDNcdTdEMjBcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRyYWdJbWFnZSksIDApO1xuICAgIH1cblxuXG5cbiAgICAvLyAzLiBcdTgzQjdcdTUzRDZcdTdGMTZcdThGOTFcdTU2NjhcdTg5QzZcdTU2RkVcbiAgICBnZXRFZGl0b3JWaWV3KCk6IEVkaXRvclZpZXcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghdmlldykgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiAodmlldy5lZGl0b3IgYXMgYW55KS5jbTtcbiAgICB9XG5cbiAgICAvLyA0LiBcdThCQkVcdTdGNkVcdTYyRDZcdTUyQThcdTg4NENcbiAgICBzZXREcmFnZ2luZ0xpbmUodmlldzogRWRpdG9yVmlldywgbGluZU51bWJlcjogbnVtYmVyIHwgbnVsbCkge1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGVmZmVjdHM6IHNldERyYWdnaW5nTGluZS5vZihsaW5lTnVtYmVyKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyA1LiBcdTgzQjdcdTUzRDZcdTYyRDZcdTUyQThcdTc2RjhcdTUxNzNcdTc2ODRcdTdGMTZcdThGOTFcdTU2NjhcdTYyNjlcdTVDNTVcbiAgICBzdGF0aWMgZ2V0RHJhZ0V4dGVuc2lvbnMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBkcmFnSGFuZGxlRmllbGQsXG4gICAgICAgICAgICBkcmFnZ2luZ0xpbmVGaWVsZCxcbiAgICAgICAgICAgIGRyYWdIYW5kbGVQbHVnaW5cbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBnZXRQbGFjZWhvbGRlclBvc2l0aW9uKCk6IG51bWJlciB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5kcmFnUGxhY2Vob2xkZXIuZ2V0UGxhY2Vob2xkZXJQb3NpdGlvbigpO1xuICAgIH1cblxuICAgIGdldFRhcmdldExpbmUoKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmRyYWdQbGFjZWhvbGRlci5nZXRUYXJnZXRMaW5lKCk7XG4gICAgfVxuXG4gICAgZ2V0U291cmNlTGluZU51bWJlcigpOiBudW1iZXIgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHJhZ1BsYWNlaG9sZGVyLmdldFNvdXJjZUxpbmVOdW1iZXIoKTtcbiAgICB9XG59XG5cbi8vIFx1NUJGQ1x1NTFGQSBzZXREcmFnZ2luZ0xpbmUgXHU0RUU1XHU0RkJGXHU1MTc2XHU0RUQ2XHU2QTIxXHU1NzU3XHU1M0VGXHU0RUU1XHU0RjdGXHU3NTI4XG5leHBvcnQgeyBzZXREcmFnZ2luZ0xpbmUgfTsiLCAiaW1wb3J0IHsgRWRpdG9yVmlldyB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuXG5leHBvcnQgY2xhc3MgRHJhZ1BsYWNlaG9sZGVyIHtcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY3VycmVudFBvc2l0aW9uOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHRhcmdldExpbmU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgc291cmNlTGluZU51bWJlcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jcmVhdGVEcmFnUGxhY2Vob2xkZXJFbGVtZW50KCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZURyYWdQbGFjZWhvbGRlckVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBkcmFnUGxhY2Vob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZHJhZ1BsYWNlaG9sZGVyLmNsYXNzTmFtZSA9ICdkcmFnLXBsYWNlaG9sZGVyJztcbiAgICAgICAgZHJhZ1BsYWNlaG9sZGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgZHJhZ1BsYWNlaG9sZGVyLnN0eWxlLmhlaWdodCA9ICcycHgnO1xuICAgICAgICBkcmFnUGxhY2Vob2xkZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuICAgICAgICBkcmFnUGxhY2Vob2xkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgZHJhZ1BsYWNlaG9sZGVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICAgICAgcmV0dXJuIGRyYWdQbGFjZWhvbGRlcjtcbiAgICB9XG5cbiAgICAvLyBcdTZBMjFcdTU3NTdcdTdGMTZcdTUzRjdcdUZGMUExXG4gICAgLy8gXHU1MjlGXHU4MEZEXHVGRjFBXHU4M0I3XHU1M0Q2XHU2NTg3XHU2ODYzXHU1QzVFXHU2MDI3XHVGRjA4ZnJvbnRtYXR0ZXJcdUZGMDlcdTc2ODRcdTg4NENcdTY1NzBcbiAgICAvLyBcdThGOTNcdTUxNjVcdUZGMUFkb2MgKGFueSkgLSBcdTY1ODdcdTY4NjNcdTVCRjlcdThDNjFcbiAgICAvLyBcdThGOTNcdTUxRkFcdUZGMUFudW1iZXIgLSBcdTY1ODdcdTY4NjNcdTVDNUVcdTYwMjdcdTc2ODRcdTg4NENcdTY1NzBcbiAgICBwcml2YXRlIGdldEZyb250bWF0dGVyTGluZUNvdW50KGRvYzogYW55KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxpbmVDb3VudCA9IDA7XG4gICAgICAgIGNvbnN0IGZpcnN0TGluZSA9IGRvYy5saW5lKDEpO1xuICAgICAgICBpZiAoZmlyc3RMaW5lLnRleHQudHJpbSgpICE9PSAnLS0tJykge1xuICAgICAgICAgICAgcmV0dXJuIDA7IC8vIFx1NkNBMVx1NjcwOVx1NjU4N1x1Njg2M1x1NUM1RVx1NjAyN1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAyOyBpIDw9IGRvYy5saW5lczsgaSsrKSB7XG4gICAgICAgICAgICBsaW5lQ291bnQrKztcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBkb2MubGluZShpKTtcbiAgICAgICAgICAgIGlmIChsaW5lLnRleHQudHJpbSgpID09PSAnLS0tJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBsaW5lQ291bnQgKyAxOyAvLyArMSBcdTUzMDVcdTYyRUNcdTdFRDNcdTY3NUZcdTc2ODQgXCItLS1cIiBcdTg4NENcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDsgLy8gXHU2NzJBXHU2MjdFXHU1MjMwXHU3RUQzXHU2NzVGXHU3Njg0XHU2NTg3XHU2ODYzXHU1QzVFXHU2MDI3XHU1MjA2XHU5Njk0XHU3QjI2XG4gICAgfVxuXG4gICAgLy8gXHU2QTIxXHU1NzU3XHU3RjE2XHU1M0Y3XHVGRjFBMlxuICAgIC8vIFx1NTI5Rlx1ODBGRFx1RkYxQVx1NjYzRVx1NzkzQVx1NjJENlx1NTJBOFx1NTM2MFx1NEY0RFx1N0IyNlxuICAgIC8vIFx1OEY5M1x1NTE2NVx1RkYxQXZpZXcgKEVkaXRvclZpZXcpIC0gXHU3RjE2XHU4RjkxXHU1NjY4XHU4OUM2XHU1NkZFLCBwb3MgKG51bWJlcikgLSBcdTVGNTNcdTUyNERcdTRGNERcdTdGNkUsIHNvdXJjZUxpbmVOdW1iZXIgKG51bWJlcikgLSBcdTZFOTBcdTg4NENcdTUzRjdcbiAgICAvLyBcdThGOTNcdTUxRkFcdUZGMUFcdTY1RTBcbiAgICBzaG93RHJhZ1BsYWNlaG9sZGVyKHZpZXc6IEVkaXRvclZpZXcsIHBvczogbnVtYmVyLCBzb3VyY2VMaW5lTnVtYmVyOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgZG9jID0gdmlldy5zdGF0ZS5kb2M7XG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyTGluZUNvdW50ID0gdGhpcy5nZXRGcm9udG1hdHRlckxpbmVDb3VudChkb2MpO1xuICAgICAgICBjb25zdCBmaXJzdENvbnRlbnRMaW5lTnVtYmVyID0gZnJvbnRtYXR0ZXJMaW5lQ291bnQgKyAxO1xuICAgICAgICBjb25zdCBsaW5lID0gZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICBsZXQgcGxhY2Vob2xkZXJQb3M6IG51bWJlcjtcbiAgICAgICAgbGV0IHRhcmdldExpbmVOdW1iZXI6IG51bWJlcjtcblxuICAgICAgICBpZiAobGluZS5udW1iZXIgPCBmaXJzdENvbnRlbnRMaW5lTnVtYmVyKSB7XG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTc2RUVcdTY4MDdcdTRGNERcdTdGNkVcdTU3MjhcdTY1ODdcdTY4NjNcdTVDNUVcdTYwMjdcdTUxODVcdUZGMENcdTVDMDZcdTUzNjBcdTRGNERcdTdCMjZcdTY1M0VcdTU3MjhcdTdCMkNcdTRFMDBcdTRFMkFcdTUxODVcdTVCQjlcdTg4NENcdTc2ODRcdTk4NzZcdTkwRThcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyUG9zID0gZG9jLmxpbmUoZmlyc3RDb250ZW50TGluZU51bWJlcikuZnJvbTtcbiAgICAgICAgICAgIHRhcmdldExpbmVOdW1iZXIgPSBmaXJzdENvbnRlbnRMaW5lTnVtYmVyO1xuICAgICAgICB9IGVsc2UgaWYgKHBvcyA+PSBkb2MubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTU3MjhcdTY1ODdcdTY4NjNcdTY3MkJcdTVDM0VcdUZGMENcdTVDMDZcdTUzNjBcdTRGNERcdTdCMjZcdTY1M0VcdTU3MjhcdTY3MDBcdTU0MEVcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyUG9zID0gZG9jLmxlbmd0aDtcbiAgICAgICAgICAgIHRhcmdldExpbmVOdW1iZXIgPSBkb2MubGluZXMgKyAxO1xuICAgICAgICB9IGVsc2UgaWYgKHBvcyA8PSBsaW5lLmZyb20gKyAobGluZS50byAtIGxpbmUuZnJvbSkgLyAyKSB7XG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTU3MjhcdTg4NENcdTc2ODRcdTRFMEFcdTUzNEFcdTkwRThcdTUyMDZcdUZGMENcdTVDMDZcdTUzNjBcdTRGNERcdTdCMjZcdTY1M0VcdTU3MjhcdTg4NENcdTc2ODRcdTVGMDBcdTU5Q0JcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyUG9zID0gbGluZS5mcm9tO1xuICAgICAgICAgICAgdGFyZ2V0TGluZU51bWJlciA9IGxpbmUubnVtYmVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1NzI4XHU4ODRDXHU3Njg0XHU0RTBCXHU1MzRBXHU5MEU4XHU1MjA2XHVGRjBDXHU1QzA2XHU1MzYwXHU0RjREXHU3QjI2XHU2NTNFXHU1NzI4XHU0RTBCXHU0RTAwXHU4ODRDXHU3Njg0XHU1RjAwXHU1OUNCXG4gICAgICAgICAgICBwbGFjZWhvbGRlclBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICAgICAgdGFyZ2V0TGluZU51bWJlciA9IGxpbmUubnVtYmVyICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlY3QgPSB2aWV3LmNvb3Jkc0F0UG9zKHBsYWNlaG9sZGVyUG9zKTtcbiAgICAgICAgaWYgKCFyZWN0KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgbGluZUVsZW1lbnQgPSB2aWV3LmRvbS5xdWVyeVNlbGVjdG9yKCcuY20tbGluZScpO1xuICAgICAgICBpZiAoIWxpbmVFbGVtZW50KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgbGluZVJlY3QgPSBsaW5lRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGluZVJlY3QubGVmdH1weGA7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IGAke2xpbmVSZWN0LndpZHRofXB4YDtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9ICcycHgnO1xuXG4gICAgICAgIGlmICh0YXJnZXRMaW5lTnVtYmVyID09PSBmaXJzdENvbnRlbnRMaW5lTnVtYmVyKSB7XG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTU3MjhcdTdCMkNcdTRFMDBcdTRFMkFcdTUxODVcdTVCQjlcdTg4NENcdUZGMENcdTVDMDZcdTUzNjBcdTRGNERcdTdCMjZcdTY1M0VcdTU3MjhcdTUxNzZcdTRFMEFcdTY1QjlcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Q29udGVudExpbmVSZWN0ID0gdmlldy5jb29yZHNBdFBvcyhwbGFjZWhvbGRlclBvcyk7XG4gICAgICAgICAgICBpZiAoZmlyc3RDb250ZW50TGluZVJlY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gYCR7Zmlyc3RDb250ZW50TGluZVJlY3QudG9wIC0gNX1weGA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0TGluZU51bWJlciA+IGRvYy5saW5lcykge1xuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU1NzI4XHU2NTg3XHU2ODYzXHU2NzJCXHU1QzNFXHVGRjBDXHU1QzA2XHU1MzYwXHU0RjREXHU3QjI2XHU2NTNFXHU1NzI4XHU2NzAwXHU1NDBFXHU0RTAwXHU4ODRDXHU0RTBCXHU2NUI5XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyAyfXB4YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1NTE3Nlx1NEVENlx1NjBDNVx1NTFCNVx1RkYwQ1x1NUMwNlx1NTM2MFx1NEY0RFx1N0IyNlx1NjUzRVx1NTcyOFx1NEUyNFx1ODg0Q1x1NEU0Qlx1OTVGNFxuICAgICAgICAgICAgY29uc3QgY3VycmVudExpbmVSZWN0ID0gdmlldy5jb29yZHNBdFBvcyhsaW5lLmZyb20pO1xuICAgICAgICAgICAgY29uc3QgbmV4dExpbmVSZWN0ID0gdmlldy5jb29yZHNBdFBvcyhkb2MubGluZSh0YXJnZXRMaW5lTnVtYmVyKS5mcm9tKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGluZVJlY3QgJiYgbmV4dExpbmVSZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IGAkeyhjdXJyZW50TGluZVJlY3QuYm90dG9tICsgbmV4dExpbmVSZWN0LnRvcCkgLyAyfXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gcGxhY2Vob2xkZXJQb3M7XG4gICAgICAgIHRoaXMudGFyZ2V0TGluZSA9IHRhcmdldExpbmVOdW1iZXI7XG4gICAgICAgIHRoaXMuc291cmNlTGluZU51bWJlciA9IHNvdXJjZUxpbmVOdW1iZXI7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1x1NTM2MFx1NEY0RFx1N0IyNlx1NEY0RFx1N0Y2RTonLCB7XG4gICAgICAgIC8vICAgICBcdTRGNERcdTdGNkU6IHRoaXMuY3VycmVudFBvc2l0aW9uLFxuICAgICAgICAvLyAgICAgXHU3NkVFXHU2ODA3XHU4ODRDXHU1M0Y3OiB0aGlzLnRhcmdldExpbmUsXG4gICAgICAgIC8vICAgICBcdTZFOTBcdTg4NENcdTUzRjc6IHRoaXMuc291cmNlTGluZU51bWJlcixcbiAgICAgICAgLy8gICAgIFx1NUY1M1x1NTI0RFx1ODg0Q1x1NTE4NVx1NUJCOTogbGluZS50ZXh0LFxuICAgICAgICAvLyAgICAgXHU3N0U5XHU1RjYyOiB7dG9wOiByZWN0LnRvcCwgbGVmdDogcmVjdC5sZWZ0fSxcbiAgICAgICAgLy8gICAgIFx1NjU4N1x1Njg2M1x1NUM1RVx1NjAyN1x1ODg0Q1x1NjU3MDogZnJvbnRtYXR0ZXJMaW5lQ291bnQsXG4gICAgICAgIC8vICAgICBcdTdCMkNcdTRFMDBcdTRFMkFcdTUxODVcdTVCQjlcdTg4NENcdTUzRjc6IGZpcnN0Q29udGVudExpbmVOdW1iZXJcbiAgICAgICAgLy8gfSk7XG4gICAgfVxuXG4gICAgLy8gNC4gXHU5NjkwXHU4NUNGXHU2MkQ2XHU1MkE4XHU1MzYwXHU0RjREXHU3QjI2XG4gICAgaGlkZURyYWdQbGFjZWhvbGRlcigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXRMaW5lID0gbnVsbDtcbiAgICAgICAgdGhpcy5zb3VyY2VMaW5lTnVtYmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyA1LiBcdTgzQjdcdTUzRDZcdTUzNjBcdTRGNERcdTdCMjZcdTRGNERcdTdGNkVcbiAgICBnZXRQbGFjZWhvbGRlclBvc2l0aW9uKCk6IG51bWJlciB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UG9zaXRpb247XG4gICAgfVxuXG4gICAgLy8gNi4gXHU4M0I3XHU1M0Q2XHU3NkVFXHU2ODA3XHU4ODRDXHU1M0Y3XG4gICAgZ2V0VGFyZ2V0TGluZSgpOiBudW1iZXIgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0TGluZTtcbiAgICB9XG5cbiAgICAvLyA3LiBcdTgzQjdcdTUzRDZcdTZFOTBcdTg4NENcdTUzRjdcbiAgICBnZXRTb3VyY2VMaW5lTnVtYmVyKCk6IG51bWJlciB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VMaW5lTnVtYmVyO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgV2lkZ2V0VHlwZSwgVmlld1VwZGF0ZSwgVmlld1BsdWdpbiwgRGVjb3JhdGlvblNldCwgRGVjb3JhdGlvbiwgRWRpdG9yVmlldyB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgU3RhdGVGaWVsZCwgU3RhdGVFZmZlY3QgfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5cbi8vIDEuIFx1NjJENlx1NTJBOFx1NjI0Qlx1NjdDNFx1NUMwRlx1OTBFOFx1NEVGNlx1N0M3QlxuY2xhc3MgRHJhZ0hhbmRsZVdpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIHRvRE9NKCkge1xuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJjbS1kcmFnLWhhbmRsZXItY29udGFpbmVyXCI7XG4gICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNsaWNrYWJsZS1pY29uXCI+XG4gICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb24gbHVjaWRlLWdyaXAtdmVydGljYWxcIj5cbiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjlcIiBjeT1cIjEyXCIgcj1cIjFcIj48L2NpcmNsZT5cbiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjlcIiBjeT1cIjVcIiByPVwiMVwiPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVwiOVwiIGN5PVwiMTlcIiByPVwiMVwiPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVwiMTVcIiBjeT1cIjEyXCIgcj1cIjFcIj48L2NpcmNsZT5cbiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjE1XCIgY3k9XCI1XCIgcj1cIjFcIj48L2NpcmNsZT5cbiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjE1XCIgY3k9XCIxOVwiIHI9XCIxXCI+PC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cbn1cblxuLy8gMi4gXHU3MkI2XHU2MDAxXHU2NTQ4XHU2NzlDXHU1QjlBXHU0RTQ5XG5jb25zdCBhZGREcmFnSGFuZGxlID0gU3RhdGVFZmZlY3QuZGVmaW5lPHtmcm9tOiBudW1iZXIsIHRvOiBudW1iZXJ9PigpO1xuY29uc3Qgc2V0RHJhZ2dpbmdMaW5lID0gU3RhdGVFZmZlY3QuZGVmaW5lPG51bWJlciB8IG51bGw+KCk7XG5cbi8vIDMuIFx1NjJENlx1NTJBOFx1NjI0Qlx1NjdDNFx1NzJCNlx1NjAwMVx1NUI1N1x1NkJCNVxuY29uc3QgZHJhZ0hhbmRsZUZpZWxkID0gU3RhdGVGaWVsZC5kZWZpbmU8RGVjb3JhdGlvblNldD4oe1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICB9LFxuICAgIHVwZGF0ZShoYW5kbGVzLCB0cikge1xuICAgICAgICBoYW5kbGVzID0gaGFuZGxlcy5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGZvciAobGV0IGUgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGUuaXMoYWRkRHJhZ0hhbmRsZSkpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVzID0gaGFuZGxlcy51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICBhZGQ6IFtEZWNvcmF0aW9uLndpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXQ6IG5ldyBEcmFnSGFuZGxlV2lkZ2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWRlOiAtMVxuICAgICAgICAgICAgICAgICAgICB9KS5yYW5nZShlLnZhbHVlLmZyb20pXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYW5kbGVzO1xuICAgIH0sXG4gICAgcHJvdmlkZTogZiA9PiBFZGl0b3JWaWV3LmRlY29yYXRpb25zLmZyb20oZilcbn0pO1xuXG4vLyA0LiBcdTYyRDZcdTUyQThcdTg4NENcdTcyQjZcdTYwMDFcdTVCNTdcdTZCQjVcbmNvbnN0IGRyYWdnaW5nTGluZUZpZWxkID0gU3RhdGVGaWVsZC5kZWZpbmU8bnVtYmVyIHwgbnVsbD4oe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgdXBkYXRlKHZhbHVlLCB0cikge1xuICAgICAgICBmb3IgKGxldCBlIG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlLmlzKHNldERyYWdnaW5nTGluZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBwcm92aWRlOiBmID0+IEVkaXRvclZpZXcuZGVjb3JhdGlvbnMuZnJvbShmLCB2YWx1ZSA9PiB7XG4gICAgICAgIHJldHVybiAodmlldzogRWRpdG9yVmlldykgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICAgICAgbGV0IGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLnNldChEZWNvcmF0aW9uLmxpbmUoeyBjbGFzczogXCJjbS1kcmFnZ2luZy1saW5lXCIgfSkucmFuZ2UobGluZS5mcm9tKSk7XG4gICAgICAgIH07XG4gICAgfSlcbn0pO1xuXG4vLyA1LiBcdTYyRDZcdTUyQThcdTYyNEJcdTY3QzRcdTYzRDJcdTRFRjZcbmNvbnN0IGRyYWdIYW5kbGVQbHVnaW4gPSBWaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgZGVjb3JhdGlvbnM6IERlY29yYXRpb25TZXQ7XG5cbiAgICBjb25zdHJ1Y3Rvcih2aWV3OiBFZGl0b3JWaWV3KSB7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmNyZWF0ZURlY29yYXRpb25zKHZpZXcpO1xuICAgIH1cblxuICAgIHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpIHtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmNyZWF0ZURlY29yYXRpb25zKHVwZGF0ZS52aWV3KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNyZWF0ZURlY29yYXRpb25zKHZpZXc6IEVkaXRvclZpZXcpIHtcbiAgICAgICAgbGV0IHdpZGdldHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQge2Zyb20sIHRvfSBvZiB2aWV3LnZpc2libGVSYW5nZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHBvcyA9IGZyb207IHBvcyA8PSB0bzspIHtcbiAgICAgICAgICAgICAgICBsZXQgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgICAgIHdpZGdldHMucHVzaChEZWNvcmF0aW9uLndpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgIHdpZGdldDogbmV3IERyYWdIYW5kbGVXaWRnZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2lkZTogLTFcbiAgICAgICAgICAgICAgICB9KS5yYW5nZShsaW5lLmZyb20pKTtcbiAgICAgICAgICAgICAgICBwb3MgPSBsaW5lLnRvICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQod2lkZ2V0cyk7XG4gICAgfVxufSwge1xuICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbn0pO1xuXG5leHBvcnQgeyBkcmFnSGFuZGxlRmllbGQsIGRyYWdnaW5nTGluZUZpZWxkLCBkcmFnSGFuZGxlUGx1Z2luLCBzZXREcmFnZ2luZ0xpbmUgfTsiLCAiaW1wb3J0IHsgRWRpdG9yVmlldyB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgRWRpdG9yU2VsZWN0aW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tNb3ZlciB7XG4gICAgLy8gXHU2QTIxXHU1NzU3XHU3RjE2XHU1M0Y3XHVGRjFBMVxuICAgIC8vIFx1NTI5Rlx1ODBGRFx1RkYxQVx1NzlGQlx1NTJBOFx1NjU4N1x1NjcyQ1x1NTc1N1xuICAgIC8vIFx1OEY5M1x1NTE2NVx1RkYxQXZpZXcgKEVkaXRvclZpZXcpLCBmcm9tTGluZSAobnVtYmVyKSwgdG9MaW5lIChudW1iZXIpXG4gICAgLy8gXHU4RjkzXHU1MUZBXHVGRjFBXHU2NUUwXG4gICAgc3RhdGljIG1vdmVCbG9jayh2aWV3OiBFZGl0b3JWaWV3LCBmcm9tTGluZTogbnVtYmVyLCB0b0xpbmU6IG51bWJlcikge1xuICAgICAgICBjb25zb2xlLmxvZygnQmxvY2tNb3Zlci5tb3ZlQmxvY2sgXHU1RjAwXHU1OUNCOicsIHsgXG4gICAgICAgICAgICBcdTRFQ0VcdTg4NEM6IGZyb21MaW5lLCBcbiAgICAgICAgICAgIFx1NTIzMFx1ODg0QzogdG9MaW5lIFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBkb2MgPSB2aWV3LnN0YXRlLmRvYztcbiAgICAgICAgY29uc3QgdG90YWxMaW5lcyA9IGRvYy5saW5lcztcblxuICAgICAgICBjb25zb2xlLmxvZygnXHU2NTg3XHU2ODYzXHU0RkUxXHU2MDZGOicsIHsgXHU2MDNCXHU4ODRDXHU2NTcwOiB0b3RhbExpbmVzIH0pO1xuXG4gICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1ODg0Q1x1NTNGN1x1NTcyOFx1NjcwOVx1NjU0OFx1ODMwM1x1NTZGNFx1NTE4NVxuICAgICAgICBmcm9tTGluZSA9IE1hdGgubWF4KDEsIE1hdGgubWluKGZyb21MaW5lLCB0b3RhbExpbmVzKSk7XG4gICAgICAgIHRvTGluZSA9IE1hdGgubWF4KDEsIE1hdGgubWluKHRvTGluZSwgdG90YWxMaW5lcyArIDEpKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnXHU4QzAzXHU2NTc0XHU1NDBFXHU3Njg0XHU4ODRDXHU1M0Y3OicsIHsgXHU0RUNFXHU4ODRDOiBmcm9tTGluZSwgXHU1MjMwXHU4ODRDOiB0b0xpbmUgfSk7XG5cbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU3NkY4XHU5MEJCXHU4ODRDXHU3OUZCXHU1MkE4XHU3Njg0XHU2MEM1XHU1MUI1XG4gICAgICAgIGlmICh0b0xpbmUgPT09IGZyb21MaW5lICsgMSB8fCBmcm9tTGluZSA9PT0gdG9MaW5lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2RTkwXHU4ODRDXHU1NDhDXHU3NkVFXHU2ODA3XHU4ODRDXHU3NkY4XHU1NDBDXHU2MjE2XHU3NkY4XHU5MEJCXHVGRjBDXHU2NUUwXHU5NzAwXHU3OUZCXHU1MkE4Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmcm9tTGluZUNvbnRlbnQgPSBkb2MubGluZShmcm9tTGluZSk7XG4gICAgICAgIGNvbnN0IGxpbmVDb250ZW50ID0gZnJvbUxpbmVDb250ZW50LnRleHQ7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1x1ODk4MVx1NzlGQlx1NTJBOFx1NzY4NFx1NTE4NVx1NUJCOTonLCB7IFx1ODg0Q1x1NTE4NVx1NUJCOTogbGluZUNvbnRlbnQgfSk7XG5cbiAgICAgICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICAgICAgbGV0IGluc2VydFBvcztcbiAgICAgICAgbGV0IG5ld0N1cnNvclBvcztcbiAgICAgICAgXG5cbiAgICAgICAgaWYgKHRvTGluZSA+IGZyb21MaW5lKSB7XG4gICAgICAgICAgICAvLyBcdTU0MTFcdTRFMEJcdTc5RkJcdTUyQThcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTU0MTFcdTRFMEJcdTc5RkJcdTUyQTgnKTtcbiAgICAgICAgICAgIGlmICh0b0xpbmUgPiB0b3RhbExpbmVzKSB7XG4gICAgICAgICAgICAgICAgLy8gXHU3OUZCXHU1MkE4XHU1MjMwXHU2NTg3XHU2ODYzXHU2NzJCXHU1QzNFXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdExpbmUgPSBkb2MubGluZSh0b3RhbExpbmVzKTtcbiAgICAgICAgICAgICAgICBpbnNlcnRQb3MgPSBsYXN0TGluZS50bztcbiAgICAgICAgICAgICAgICBjaGFuZ2VzID0gW1xuICAgICAgICAgICAgICAgICAgICB7IGZyb206IGluc2VydFBvcywgaW5zZXJ0OiAnXFxuJyArIGxpbmVDb250ZW50IH0sXG4gICAgICAgICAgICAgICAgICAgIHsgZnJvbTogZnJvbUxpbmVDb250ZW50LmZyb20sIHRvOiBmcm9tTGluZUNvbnRlbnQudG8gKyAoZnJvbUxpbmUgPT09IHRvdGFsTGluZXMgPyAwIDogMSksIGluc2VydDogJycgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgbmV3Q3Vyc29yUG9zID0gaW5zZXJ0UG9zICsgbGluZUNvbnRlbnQubGVuZ3RoICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0TGluZSA9IGRvYy5saW5lKHRvTGluZSAtIDEpO1xuICAgICAgICAgICAgICAgIGluc2VydFBvcyA9IHRhcmdldExpbmUudG87XG4gICAgICAgICAgICAgICAgY2hhbmdlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgeyBmcm9tOiBpbnNlcnRQb3MsIGluc2VydDogJ1xcbicgKyBsaW5lQ29udGVudCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGZyb206IGZyb21MaW5lQ29udGVudC5mcm9tLCB0bzogZnJvbUxpbmVDb250ZW50LnRvICsgMSwgaW5zZXJ0OiAnJyB9XG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBuZXdDdXJzb3JQb3MgPSBpbnNlcnRQb3MgKyBsaW5lQ29udGVudC5sZW5ndGggKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHU1NDExXHU0RTBBXHU3OUZCXHU1MkE4XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1NDExXHU0RTBBXHU3OUZCXHU1MkE4Jyk7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRMaW5lID0gZG9jLmxpbmUodG9MaW5lIC0gMSk7XG4gICAgICAgICAgICBjb25zdCBsYXN0TGluZSA9IGRvYy5saW5lKGRvYy5saW5lcyk7XG4gICAgICAgICAgICBpbnNlcnRQb3MgPSB0YXJnZXRMaW5lLnRvOyAvLyBcdTRGN0ZcdTc1MjggLnRvIFx1ODAwQ1x1NEUwRFx1NjYyRiAuZnJvbVxuXG4gICAgICAgICAgICBpZiAoZnJvbUxpbmUgPT09IHRvdGFsTGluZXMpIHtcbiAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTY3MDBcdTU0MEVcdTRFMDBcdTg4NENcdTU0MTFcdTRFMEFcdTc5RkJcdTUyQTgsXHU3NkY0XHU2M0E1XHU1MjIwXHU5NjY0XHU2NzAwXHU1NDBFXHU0RTAwXHU4ODRDXHU1MTg1XHU1QkI5XHUzMDAyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjcwMFx1NTQwRVx1NEUwMFx1ODg0Q1x1NTQxMVx1NEUwQVx1NzlGQlx1NTJBOCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZExhc3RMaW5lID0gZG9jLmxpbmUodG90YWxMaW5lcyAtIDEpO1xuICAgICAgICAgICAgICAgIGNoYW5nZXMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHsgZnJvbTogaW5zZXJ0UG9zLCBpbnNlcnQ6ICdcXG4nICsgbGluZUNvbnRlbnQgfSwgLy8gXHU2REZCXHU1MkEwXHU2MzYyXHU4ODRDXHU3QjI2XG4gICAgICAgICAgICAgICAgICAgIHsgZnJvbTogc2Vjb25kTGFzdExpbmUudG8sIHRvOiBkb2MubGVuZ3RoIH0gLy8gXHU3NkY0XHU2M0E1XHU1MjIwXHU5NjY0XHU2NzAwXHU1NDBFXHU0RTAwXHU4ODRDXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgeyBmcm9tOiBpbnNlcnRQb3MsIGluc2VydDogJ1xcbicgKyBsaW5lQ29udGVudCB9LCAvLyBcdTZERkJcdTUyQTBcdTYzNjJcdTg4NENcdTdCMjZcbiAgICAgICAgICAgICAgICAgICAgeyBmcm9tOiBmcm9tTGluZUNvbnRlbnQuZnJvbSwgdG86IGZyb21MaW5lQ29udGVudC50byArIDEsIGluc2VydDogJycgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdDdXJzb3JQb3MgPSBpbnNlcnRQb3MgKyBsaW5lQ29udGVudC5sZW5ndGggKyAxOyAvLyArMSBcdTU2RTBcdTRFM0FcdTZERkJcdTUyQTBcdTRFODZcdTYzNjJcdTg4NENcdTdCMjZcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTUxQzZcdTU5MDdcdTYyNjdcdTg4NENcdTc2ODRcdTY2RjRcdTY1Mzk6JywgY2hhbmdlcyk7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgY2hhbmdlczogY2hhbmdlcyxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoTWF0aC5taW4obmV3Q3Vyc29yUG9zLCBkb2MubGVuZ3RoKSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NjI2N1x1ODg0Q1x1NjZGNFx1NjUzOTonLCB7XG4gICAgICAgICAgICAgICAgZGVsZXRlRnJvbTogZnJvbUxpbmUsXG4gICAgICAgICAgICAgICAgaW5zZXJ0QXQ6IHRvTGluZSxcbiAgICAgICAgICAgICAgICBpbnNlcnRDb250ZW50OiBsaW5lQ29udGVudCxcbiAgICAgICAgICAgICAgICBuZXdDdXJzb3JQb3M6IG5ld0N1cnNvclBvc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFx1OUE4Q1x1OEJDMVx1NzlGQlx1NTJBOFx1N0VEM1x1Njc5Q1xuICAgICAgICAgICAgY29uc3QgbmV3RG9jID0gdmlldy5zdGF0ZS5kb2M7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXHU3OUZCXHU1MkE4XHU1NDBFXHU3Njg0XHU2NTg3XHU2ODYzXHU2MDNCXHU4ODRDXHU2NTcwOicsIG5ld0RvYy5saW5lcyk7XG5cbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjVCMFx1NEY0RFx1N0Y2RVx1NzY4NFx1NTE4NVx1NUJCOVxuICAgICAgICAgICAgaWYgKHRvTGluZSA8PSBuZXdEb2MubGluZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYXJnZXRMaW5lID0gbmV3RG9jLmxpbmUoTWF0aC5taW4odG9MaW5lLCBuZXdEb2MubGluZXMpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NUIwXHU0RjREXHU3RjZFXHU3Njg0XHU1MTg1XHU1QkI5OicsIHsgXHU4ODRDXHU1M0Y3OiBNYXRoLm1pbih0b0xpbmUsIG5ld0RvYy5saW5lcyksIFx1NTE4NVx1NUJCOTogbmV3VGFyZ2V0TGluZS50ZXh0IH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU2NUIwXHU0RjREXHU3RjZFXHU1NzI4XHU2NTg3XHU2ODYzXHU2NzJCXHU1QzNFJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTM5Rlx1NEY0RFx1N0Y2RVx1NzY4NFx1NTE4NVx1NUJCOVxuICAgICAgICAgICAgaWYgKGZyb21MaW5lIDw9IG5ld0RvYy5saW5lcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTGluZSA9IG5ld0RvYy5saW5lKE1hdGgubWluKGZyb21MaW5lLCBuZXdEb2MubGluZXMpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU1MzlGXHU0RjREXHU3RjZFXHU3Njg0XHU1RjUzXHU1MjREXHU1MTg1XHU1QkI5OicsIHsgXHU4ODRDXHU1M0Y3OiBNYXRoLm1pbihmcm9tTGluZSwgbmV3RG9jLmxpbmVzKSwgXHU1MTg1XHU1QkI5OiBvcmlnaW5hbExpbmUudGV4dCB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1NTM5Rlx1NEY0RFx1N0Y2RVx1NURGMlx1OEQ4NVx1NTFGQVx1NjU4N1x1Njg2M1x1ODMwM1x1NTZGNCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTc5RkJcdTUyQThcdTU3NTdcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gLy8gXHU2QTIxXHU1NzU3XHU3RjE2XHU1M0Y3XHVGRjFBMlxuICAgIC8vIC8vIFx1NTI5Rlx1ODBGRFx1RkYxQVx1ODNCN1x1NTNENlx1NjU4N1x1Njg2M1x1NUM1RVx1NjAyN1x1NEZFMVx1NjA2Rlx1N0VEM1x1Njc1Rlx1NzY4NFx1NEY0RFx1N0Y2RVxuICAgIC8vIC8vIFx1OEY5M1x1NTE2NVx1RkYxQWRvYyAoYW55KVxuICAgIC8vIC8vIFx1OEY5M1x1NTFGQVx1RkYxQW51bWJlciAoXHU2NTg3XHU2ODYzXHU1QzVFXHU2MDI3XHU0RkUxXHU2MDZGXHU3RUQzXHU2NzVGXHU3Njg0XHU0RjREXHU3RjZFKVxuICAgIC8vIHByaXZhdGUgc3RhdGljIGdldEZyb250bWF0dGVyRW5kUG9zaXRpb24oZG9jOiBhbnkpOiBudW1iZXIge1xuICAgIC8vICAgICBjb25zdCBmaXJzdExpbmUgPSBkb2MubGluZSgxKTtcbiAgICAvLyAgICAgaWYgKGZpcnN0TGluZS50ZXh0LnRyaW0oKSAhPT0gJy0tLScpIHtcbiAgICAvLyAgICAgICAgIHJldHVybiAwOyAvLyBcdTZDQTFcdTY3MDlcdTY1ODdcdTY4NjNcdTVDNUVcdTYwMjdcdTRGRTFcdTYwNkZcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBmb3IgKGxldCBpID0gMjsgaSA8PSBkb2MubGluZXM7IGkrKykge1xuICAgIC8vICAgICAgICAgY29uc3QgbGluZSA9IGRvYy5saW5lKGkpO1xuICAgIC8vICAgICAgICAgaWYgKGxpbmUudGV4dC50cmltKCkgPT09ICctLS0nKSB7XG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIGxpbmUudG87XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgcmV0dXJuIDA7IC8vIFx1NjcyQVx1NjI3RVx1NTIzMFx1N0VEM1x1Njc1Rlx1NzY4NFx1NjU4N1x1Njg2M1x1NUM1RVx1NjAyN1x1NEZFMVx1NjA2Rlx1NTIwNlx1OTY5NFx1N0IyNlxuICAgIC8vIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFZGl0b3JWaWV3IH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFZGl0b3JWaWV3KGFwcDogQXBwKTogRWRpdG9yVmlldyB8IG51bGwge1xuICAgIGNvbnN0IHZpZXcgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBpZiAoIXZpZXcpIHJldHVybiBudWxsO1xuICAgIHJldHVybiAodmlldy5lZGl0b3IgYXMgYW55KS5jbTtcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQXVCOzs7QUNFdkIsc0JBQTBDOzs7QUNBbkMsSUFBTSxrQkFBTixNQUFzQjtBQUFBLEVBTXpCLGNBQWM7QUFKZCxTQUFRLGtCQUFpQztBQUN6QyxTQUFRLGFBQTRCO0FBQ3BDLFNBQVEsbUJBQWtDO0FBR3RDLFNBQUssVUFBVSxLQUFLLDZCQUE2QjtBQUNqRCxhQUFTLEtBQUssWUFBWSxLQUFLLE9BQU87QUFBQSxFQUMxQztBQUFBLEVBRUEsQUFBUSwrQkFBNEM7QUFDaEQsVUFBTSxrQkFBa0IsU0FBUyxjQUFjLEtBQUs7QUFDcEQsb0JBQWdCLFlBQVk7QUFDNUIsb0JBQWdCLE1BQU0sV0FBVztBQUNqQyxvQkFBZ0IsTUFBTSxTQUFTO0FBQy9CLG9CQUFnQixNQUFNLGtCQUFrQjtBQUN4QyxvQkFBZ0IsTUFBTSxVQUFVO0FBQ2hDLG9CQUFnQixNQUFNLFNBQVM7QUFDL0IsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQU1BLEFBQVEsd0JBQXdCLEtBQWtCO0FBQzlDLFFBQUksWUFBWTtBQUNoQixVQUFNLFlBQVksSUFBSSxLQUFLLENBQUM7QUFDNUIsUUFBSSxVQUFVLEtBQUssS0FBSyxNQUFNLE9BQU87QUFDakMsYUFBTztBQUFBLElBQ1g7QUFDQSxhQUFTLElBQUksR0FBRyxLQUFLLElBQUksT0FBTyxLQUFLO0FBQ2pDO0FBQ0EsWUFBTSxPQUFPLElBQUks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
